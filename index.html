<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<title>蓝湿皮｜耐化学可移除标签＋机械固定（iOS UI）</title>
<style>
  :root{
    --bg:#ffffff; --panel:#f5f6f7; --card:#ffffff; --muted:#6b7280;
    --fg:#111827; --acc:#0a84ff; --ok:#34c759; --warn:#ff9f0a; --danger:#ff3b30;
    --border:#e5e7eb; --shadow:0 8px 28px rgba(0,0,0,.06);
    --tap:56px; --radius:14px;
  }
  @media (prefers-color-scheme: dark){
    :root{ --bg:#0b0b0d; --panel:#16171a; --card:#1c1d21; --fg:#f5f7fa; --muted:#a1a1aa;
           --border:#2a2b31; --shadow:0 10px 30px rgba(0,0,0,.35) }
  }
  *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent }
  html,body{ height:100% }
  body{
    margin:0;
    font: 16px/1.55 -apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display","Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
    color:var(--fg); background:var(--bg);
  }
  .wrap{ max-width:980px; margin:0 auto; padding:calc(12px + env(safe-area-inset-top)) 12px calc(90px + env(safe-area-inset-bottom)) }
  header{
    position:sticky; top:0; z-index:10;
    padding: calc(6px + env(safe-area-inset-top)) 8px 8px;
    margin: -12px -12px 8px;
    background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.6) 70%, transparent);
    border-bottom:1px solid var(--border);
    backdrop-filter: blur(10px);
  }
  @media (prefers-color-scheme: dark){
    header{ background:linear-gradient(180deg, rgba(11,11,13,.9), rgba(11,11,13,.5) 70%, transparent) }
  }
  h1{ margin:6px 0 0; font-size: clamp(22px,5.6vw,30px); font-weight: 700; letter-spacing:.2px }
  .sub{ color:var(--muted); margin:6px 2px 0; font-size:14px }
  .chips{ display:flex; gap:8px; overflow:auto; padding:10px 2px 0; -webkit-overflow-scrolling: touch }
  .chip{ flex:0 0 auto; border:1px solid var(--border); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:12px; background:var(--card) }

  section{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:14px; margin-top:12px; box-shadow:var(--shadow) }
  h2{ margin:0 0 10px; font-size:19px; font-weight:700 }
  .muted{ color:var(--muted) }
  .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
  .btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; height:var(--tap);
        padding:0 16px; border-radius:12px; border:1px solid var(--border); background:var(--card); color:var(--fg); text-decoration:none; min-width:44px }
  .btn.primary{ background:var(--acc); color:#fff; border-color:var(--acc) }
  .btn:active{ transform: translateY(1px) }

  /* iOS segmented control */
  .seg{ display:flex; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:var(--panel) }
  .seg button{ flex:1; height:44px; border:0; background:transparent; color:var(--muted); font-weight:600 }
  .seg button.active{ background:#fff; color:var(--fg); box-shadow: inset 0 0 0 2px var(--acc) }

  /* inputs & sliders tuned for Safari */
  input[type="number"], input[type="text"]{
    -webkit-appearance: none; appearance:none;
    background:var(--panel); color:var(--fg); border:1px solid var(--border);
    border-radius:12px; height:44px; padding:0 12px; width:130px; font-size:16px;
  }
  input[type="range"]{ width:100%; -webkit-appearance:none; height:34px; background:transparent; margin:4px 0 8px }
  input[type="range"]::-webkit-slider-runnable-track{ height:6px; background:var(--panel); border:1px solid var(--border); border-radius:999px }
  input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; height:28px; width:28px; margin-top:-11px; background:#fff; border:2px solid var(--acc); border-radius:50%; box-shadow:0 2px 8px rgba(0,0,0,.15) }
  label{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:10px 0 }

  .kpi{ display:flex; align-items:baseline; gap:8px; padding:10px 12px; border-radius:12px; background:var(--panel); border:1px solid var(--border) }
  .kpi strong{ font-size:22px }
  .ok{ color:var(--ok) } .warn{ color:var(--warn) } .danger{ color:var(--danger) }
  details{ border:1px solid var(--border); border-radius:12px; background:var(--panel); padding:10px; margin:8px 0 }
  details > summary{ cursor:pointer; list-style:none; outline:none; font-weight:700 }
  details > summary::-webkit-details-marker{ display:none }

  /* BOM */
  .bom{ width:100%; border-collapse: collapse; }
  .bom th,.bom td{ border:1px solid var(--border); padding:10px; text-align:left; font-size:15px; background:var(--card) }
  .bom input[type="number"]{ width:90px }

  /* bottom Tab Bar with safe-area */
  .nav{ position:fixed; left:0; right:0; bottom:0; height:calc(62px + env(safe-area-inset-bottom));
        padding-bottom: env(safe-area-inset-bottom); background:var(--card); border-top:1px solid var(--border); display:flex; z-index:20 }
  .nav a{ flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; color:var(--muted); text-decoration:none; gap:4px; font-size:12px }
  .nav a.active{ color:var(--acc) }

  /* language blocks */
  [data-lang]{ display:none }
  [data-lang].active{ display:block }

  .float-top{ position:fixed; right:12px; bottom:calc(82px + env(safe-area-inset-bottom)); z-index:30 }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="row" style="justify-content:space-between">
        <div>
          <h1 id="title">蓝湿皮｜耐化学可移除标签＋机械固定</h1>
          <p class="sub" id="subtitle">iOS风格·手机优先 · 热转印变量码 · 扫码入 MES</p>
        </div>
        <div class="seg" role="tablist" aria-label="language">
          <button id="langZh" role="tab" aria-selected="true" class="active">中文</button>
          <button id="langEn" role="tab" aria-selected="false">EN</button>
        </div>
      </div>
      <div class="chips" aria-label="highlights">
        <div class="chip" data-i18n="chip1">Tyvek/PP 合成纸 · 树脂碳带</div>
        <div class="chip" data-i18n="chip2">塑料T钉/箭扣</div>
        <div class="chip" data-i18n="chip3">首读≥99.5%</div>
        <div class="chip" data-i18n="chip4">304/316 可选</div>
      </div>
      <div class="row" style="margin-top:8px">
        <a class="btn primary" id="btnMore">阅读全文</a>
      </div>
    </header>

    <!-- ZH -->
    <div data-lang="zh" class="active">
      <section id="mode">
        <h2>模式选择</h2>
        <div class="seg" role="tablist" aria-label="mode">
          <button id="mSemi" role="tab" aria-selected="true" class="active">半自动</button>
          <button id="mFull" role="tab" aria-selected="false">全自动</button>
        </div>
        <div class="row" style="margin-top:10px; overflow:auto">
          <div class="kpi"><strong id="kpiCt">≤3.5 s/张</strong><span class="muted">目标节拍</span></div>
          <div class="kpi"><strong id="kpiTPH">≈ 900–1,100 张/小时</strong><span class="muted">单工位（折算）</span></div>
          <div class="kpi"><strong>≥99.5%</strong><span class="muted">二维码首读率</span></div>
        </div>
        <p class="muted" id="modeNote">建议从半自动起步；后续可升至全自动。</p>
      </section>

      <section id="flow">
        <h2>流程与单元</h2>
        <details open>
          <summary>A. 打印/出标</summary>
          <ul class="muted">
            <li>工业热转印（300/600 dpi，树脂带），剥离板＋到位光电</li>
            <li>模板含短ID/二维码（V1/V2）</li>
          </ul>
        </details>
        <details>
          <summary>B. 取标/贴合</summary>
          <ul class="muted"><li>真空吸盘/海绵垫；可选“只冲标签”预冲针</li></ul>
        </details>
        <details>
          <summary>C. 穿孔＋上扣</summary>
          <ul class="muted"><li>伺服Z（0.4–1.0 kN峰值）＋力传感；气动T钉枪；UHMW-PE 砧块</li></ul>
        </details>
        <details>
          <summary>D. 扫码/MES</summary>
          <ul class="muted"><li>固定式2D扫码器，首读≥99.5%；NG 重打/旁路；MES 记录 Piece-ID/坐标/班次</li></ul>
        </details>
        <details id="moreZh" style="display:none">
          <summary>更多（材料/安全/约束）</summary>
          <ul class="muted">
            <li>304 机架（腐蚀区可 316）；电气 IP54</li>
            <li>固定点距皮边 ≥15–20 mm；禁用金属订书钉</li>
            <li>断点缓存、事件日志与追溯字段</li>
          </ul>
        </details>
      </section>

      <section id="calc">
        <h2>产能计算器</h2>
        <div>
          <label>节拍（秒/张）<input id="ct" type="number" step="0.1" min="1" value="3.0"></label>
          <input id="ctR" type="range" min="1" max="6" step="0.1" value="3.0" aria-label="节拍滑块">
          <label>工位数量<input id="st" type="number" step="1" min="1" value="1"></label>
          <input id="stR" type="range" min="1" max="8" step="1" value="1" aria-label="工位滑块">
          <label>首读率（0–1）<input id="fp" type="number" step="0.01" min="0.9" max="1" value="0.995"></label>
          <input id="fpR" type="range" min="0.9" max="1" step="0.005" value="0.995" aria-label="首读率滑块">
          <label>目标产能（张/小时）<input id="target" type="number" min="100" step="50" value="800"></label>
          <div class="row" style="margin-top:8px">
            <a class="btn primary" id="btnCalc">计算</a>
            <a class="btn" id="btnReset">重置</a>
            <a class="btn" id="btnPrint">打印/导出</a>
            <a class="btn" id="btnCopyRFQ">复制询价要点</a>
          </div>
          <div id="out" class="muted" style="margin-top:8px"></div>
        </div>
      </section>

      <section id="bom">
        <h2>BOM 勾选清单</h2>
        <div class="row" style="margin-bottom:8px">
          <a class="btn" id="bomAll">全选</a>
          <a class="btn" id="bomNone">清空</a>
          <a class="btn" id="bomCopy">复制清单</a>
        </div>
        <div style="overflow:auto">
          <table class="bom" id="bomTable" aria-label="BOM">
            <thead>
              <tr><th>选</th><th>物料</th><th>规格</th><th>数量</th><th>单价(¥)</th><th>小计(¥)</th></tr>
            </thead>
            <tbody></tbody>
            <tfoot><tr><td colspan="5">合计</td><td id="bomTotal">0</td></tr></tfoot>
          </table>
        </div>
      </section>

      <section id="accept">
        <h2>验收与要点</h2>
        <ul class="muted">
          <li>连续抽样 ≥1000 张，首读 ≥99.5%，累计 ≥99.9%</li>
          <li>8h 稳定运行；日志完整</li>
          <li>湿态拉脱力 ≥20 N；标签/扣 100% 回收</li>
          <li>固定点距边 ≥15–20 mm；禁用金属订书钉</li>
        </ul>
      </section>
    </div>

    <!-- EN -->
    <div data-lang="en">
      <section id="mode_en">
        <h2>Mode</h2>
        <div class="seg" role="tablist" aria-label="mode">
          <button id="mSemi_en" role="tab" aria-selected="true" class="active">Semi-auto</button>
          <button id="mFull_en" role="tab" aria-selected="false">Full-auto</button>
        </div>
        <div class="row" style="margin-top:10px; overflow:auto">
          <div class="kpi"><strong id="kpiCt_en">≤3.5 s/pc</strong><span class="muted">Target takt</span></div>
          <div class="kpi"><strong id="kpiTPH_en">≈ 900–1,100 pcs/h</strong><span class="muted">Per station (FPY)</span></div>
          <div class="kpi"><strong>≥99.5%</strong><span class="muted">First-pass decode</span></div>
        </div>
        <p class="muted" id="modeNote_en">Start with semi-auto; upgrade to full-auto later.</p>
      </section>

      <section id="flow_en">
        <h2>Flow & Units</h2>
        <details open>
          <summary>A. Print / dispense</summary>
          <ul class="muted">
            <li>Industrial TT 300/600 dpi (resin ribbon), peel plate + sensor</li>
            <li>Template with short ID & QR (V1/V2)</li>
          </ul>
        </details>
        <details><summary>B. Pick & place</summary><ul class="muted"><li>Vacuum pad / sponge; optional tag-only pre-punch</li></ul></details>
        <details><summary>C. Pierce & fasten</summary><ul class="muted"><li>Servo-Z (0.4–1.0 kN) + force; pneumatic T-tag gun; UHMW-PE anvil</li></ul></details>
        <details><summary>D. Scan / MES</summary><ul class="muted"><li>Fixed 2D reader ≥99.5% FPY; NG reprint/bypass; MES logs Piece-ID/XY/shift</li></ul></details>
        <details id="moreEn" style="display:none">
          <summary>More (materials / safety / constraints)</summary>
          <ul class="muted">
            <li>SS304 frame (SS316 optional); IP54 electrical</li>
            <li>Fasten ≥15–20 mm from edge; no metal staples</li>
            <li>Offline queue & event logs</li>
          </ul>
        </details>
      </section>

      <section id="calc_en">
        <h2>Capacity Calculator</h2>
        <div>
          <label>Takt (s/pc)<input id="ct_en" type="number" step="0.1" min="1" value="3.0"></label>
          <input id="ctR_en" type="range" min="1" max="6" step="0.1" value="3.0" aria-label="takt slider">
          <label>Stations<input id="st_en" type="number" step="1" min="1" value="1"></label>
          <input id="stR_en" type="range" min="1" max="8" step="1" value="1" aria-label="stations slider">
          <label>FPY (0–1)<input id="fp_en" type="number" step="0.01" min="0.9" max="1" value="0.995"></label>
          <input id="fpR_en" type="range" min="0.9" max="1" step="0.005" value="0.995" aria-label="fpy slider">
          <label>Target (pcs/h)<input id="target_en" type="number" min="100" step="50" value="800"></label>
          <div class="row" style="margin-top:8px">
            <a class="btn primary" id="btnCalc_en">Calculate</a>
            <a class="btn" id="btnReset_en">Reset</a>
            <a class="btn" id="btnPrint_en">Print/Export</a>
            <a class="btn" id="btnCopyRFQ_en">Copy RFQ points</a>
          </div>
          <div id="out_en" class="muted" style="margin-top:8px"></div>
        </div>
      </section>

      <section id="bom_en">
        <h2>BOM Checklist</h2>
        <div class="row" style="margin-bottom:8px">
          <a class="btn" id="bomAll_en">Select all</a>
          <a class="btn" id="bomNone_en">Clear</a>
          <a class="btn" id="bomCopy_en">Copy list</a>
        </div>
        <div style="overflow:auto">
          <table class="bom" id="bomTable_en" aria-label="BOM">
            <thead>
              <tr><th>Pick</th><th>Item</th><th>Spec</th><th>Qty</th><th>Unit</th><th>Subtotal</th></tr>
            </thead>
            <tbody></tbody>
            <tfoot><tr><td colspan="5">Total</td><td id="bomTotal_en">0</td></tr></tfoot>
          </table>
        </div>
      </section>

      <section id="accept_en">
        <h2>Acceptance</h2>
        <ul class="muted">
          <li>Sample ≥1000 pcs; first-pass ≥99.5%, cumulative ≥99.9%</li>
          <li>8h continuous run; full logs</li>
          <li>Wet pull-off ≥20 N; 100% tag/fastener recovery</li>
          <li>Fasten ≥15–20 mm from edge; no metal staples</li>
        </ul>
      </section>
    </div>

    <a class="btn float-top" id="btnTop">↑ 顶部 / Top</a>
  </div>

  <!-- iOS-like Tab Bar -->
  <nav class="nav" role="navigation" aria-label="Bottom">
    <a href="#mode" class="active" id="nvMode">模式 / Mode</a>
    <a href="#calc" id="nvCalc">计算 / Calc</a>
    <a href="#accept" id="nvAcc">验收 / Accept</a>
  </nav>

<script>
(function(){
  const $ = s => document.querySelector(s);
  const store = JSON.parse(localStorage.getItem('ios_tag_cfg')||'{}');
  let moreOpen = false; // controls Read more

  // Copy or Share helper (iOS share first)
  function shareOrCopy(text, title='Info'){
    if (navigator.share){
      return navigator.share({title, text}).catch(()=>copyFallback());
    } else {
      return copyText(text);
    }
    function copyFallback(){ return copyText(text); }
  }
  function copyText(msg){
    if (navigator.clipboard && window.isSecureContext){
      return navigator.clipboard.writeText(msg);
    } else {
      const ta=document.createElement('textarea');
      ta.value=msg; ta.style.position='fixed'; ta.style.left='-9999px';
      document.body.appendChild(ta); ta.focus(); ta.select();
      try{ document.execCommand('copy'); }catch(e){}
      document.body.removeChild(ta);
      return Promise.resolve();
    }
  }

  // Language
  const langZh = $('#langZh'), langEn = $('#langEn');
  const zh = document.querySelector('[data-lang="zh"]');
  const en = document.querySelector('[data-lang="en"]');
  const title = $('#title'), subtitle = $('#subtitle');
  const chips = document.querySelectorAll('[data-i18n]');
  const dict = {
    zh:{
      title:'蓝湿皮｜耐化学可移除标签＋机械固定',
      subtitle:'iOS风格·手机优先 · 热转印变量码 · 扫码入 MES',
      chips:['Tyvek/PP 合成纸 · 树脂碳带','塑料T钉/箭扣','首读≥99.5%','304/316 可选'],
      moreBtn:['阅读全文','收起'],
      nav:['#mode','#calc','#accept']
    },
    en:{
      title:'Wet-blue · Chemical-resistant removable tagging (iOS UI)',
      subtitle:'Mobile-first · Thermal-transfer variable data · Scan to MES',
      chips:['Tyvek/PP + resin ribbon','Plastic T-tag/arrow fastener','≥99.5% first-pass','SS304/SS316'],
      moreBtn:['Read more','Collapse'],
      nav:['#mode_en','#calc_en','#accept_en']
    }
  };
  function applyLang(l){
    const d = dict[l];
    title.textContent = d.title; subtitle.textContent = d.subtitle;
    chips.forEach((el,i)=>{ el.textContent = d.chips[i] });
    zh.classList.toggle('active', l==='zh'); en.classList.toggle('active', l==='en');
    langZh.classList.toggle('active', l==='zh'); langZh.setAttribute('aria-selected', l==='zh');
    langEn.classList.toggle('active', l==='en'); langEn.setAttribute('aria-selected', l==='en');
    document.body.setAttribute('lang', l==='zh'?'zh-CN':'en');
    localStorage.setItem('ios_lang', l);
    $('#btnMore').textContent = moreOpen ? d.moreBtn[1] : d.moreBtn[0];
    // update bottom nav targets
    $('#nvMode').href = d.nav[0];
    $('#nvCalc').href = d.nav[1];
    $('#nvAcc').href = d.nav[2];
  }
  const savedLang = localStorage.getItem('ios_lang')||'zh';
  langZh.addEventListener('click', ()=>applyLang('zh'));
  langEn.addEventListener('click', ()=>applyLang('en'));
  applyLang(savedLang);

  // Read more toggle
  const moreZh = $('#moreZh'), moreEn = $('#moreEn');
  $('#btnMore').addEventListener('click', ()=>{
    moreOpen = !moreOpen;
    moreZh.style.display = moreOpen?'block':'none';
    moreEn.style.display = moreOpen?'block':'none';
    const l = localStorage.getItem('ios_lang')||'zh';
    const d = dict[l];
    $('#btnMore').textContent = moreOpen? d.moreBtn[1] : d.moreBtn[0];
  });

  // Mode & Calculator (ZH)
  const semi = $('#mSemi'), full = $('#mFull');
  const kpiCt = $('#kpiCt'), kpiTPH = $('#kpiTPH'), modeNote = $('#modeNote');
  const ct = $('#ct'), ctR = $('#ctR'];
  const stN = $('#st'), stR = $('#stR'];
  const fp = $('#fp'), fpR = $('#fpR'];
  const target = $('#target']);
  const out = $('#out');

  function syncRange(num, rng){ rng.value = num.value; }
  function syncNumber(rng, num){ num.value = rng.value; }
  [[ct,ctR],[stN,stR],[fp,fpR]].forEach(([n,r])=>{
    n.addEventListener('input', ()=>{syncRange(n,r); calc();});
    r.addEventListener('input', ()=>{syncNumber(r,n); calc();});
  });

  function applyMode(m){
    if(m==='full'){
      full.classList.add('active'); full.setAttribute('aria-selected','true');
      semi.classList.remove('active'); semi.setAttribute('aria-selected','false');
      ct.value = ctR.value = 4.5; stN.value = stR.value = 1; fp.value = fpR.value = 0.995;
      kpiCt.textContent = '≤5.0 s/张';
      kpiTPH.textContent = '≈ 700–1,000 张/小时';
      modeNote.textContent = '全自动：视觉对位＋XY/机械臂；产能随皮张尺寸与对位距离变化。';
      store.mode='full';
    }else{
      semi.classList.add('active'); semi.setAttribute('aria-selected','true');
      full.classList.remove('active'); full.setAttribute('aria-selected','false');
      ct.value = ctR.value = 3.0; stN.value = stR.value = 1; fp.value = fpR.value = 0.995;
      kpiCt.textContent = '≤3.5 s/张';
      kpiTPH.textContent = '≈ 900–1,100 张/小时';
      modeNote.textContent = '半自动：打印/取贴/穿扣/扫码分步协作；上手快、投入低。';
      store.mode='semi';
    }
    calc(); localStorage.setItem('ios_tag_cfg', JSON.stringify({mode:store.mode, ct:ct.value, st:stN.value, fp:fp.value, target:target